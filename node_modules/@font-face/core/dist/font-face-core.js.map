{"version":3,"file":"font-face-core.js","sources":["../../../node_modules/.pnpm/registry.npmjs.org/arrify/2.0.1/node_modules/arrify/index.js","../src/arrayUtils.js","../../../node_modules/.pnpm/registry.npmjs.org/isobject/4.0.0/node_modules/isobject/index.js","../../../node_modules/.pnpm/registry.npmjs.org/is-function/1.0.1/node_modules/is-function/index.js","../src/jsonTemplating.js","../src/template.js","../src/index.js"],"sourcesContent":["'use strict';\n\nconst arrify = value => {\n\tif (value === null || value === undefined) {\n\t\treturn [];\n\t}\n\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\tif (typeof value === 'string') {\n\t\treturn [value];\n\t}\n\n\tif (typeof value[Symbol.iterator] === 'function') {\n\t\treturn [...value];\n\t}\n\n\treturn [value];\n};\n\nmodule.exports = arrify;\n","\r\nexport const arrayJoin = (array, separator) => {\r\n    return array\r\n        .filter(item => item != undefined)\r\n        .join(separator);\r\n}\r\n\r\nexport const arrayJoinMap = (array, fn, separator, useArrayJoin) => {\r\n    const mappedArray = array.map(fn);\r\n    return useArrayJoin \r\n        ? arrayJoin(mappedArray, separator)\r\n        : mappedArray.join(separator);\r\n}\r\n\r\nexport const addToArray = (array, appendArray) => Array.prototype.push.apply(array, appendArray);","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nexport default function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","import aarify from 'arrify';\r\nimport {arrayJoinMap} from './arrayUtils';\r\nimport isObject from 'isobject';\r\nimport isFunction from 'is-function';\r\n\r\nconst jsonTemplate = {\r\n    configify(tplConfig) {\r\n        if(isObject(tplConfig)) {\r\n            return tplConfig;\r\n        }\r\n        else {\r\n            return {\r\n                tpl: tplConfig,\r\n            }\r\n        }\r\n    },\r\n\r\n    resolveTpl() {\r\n        return isFunction(tpl) ? tpl() : tpl;\r\n    },\r\n\r\n    isNotValidTplConfig(tplConfig) {\r\n        return tplConfig == null;\r\n    },\r\n\r\n    isTplParseable(tpl) {\r\n        return Array.isArray(tpl) || isObject(tpl);\r\n    },\r\n\r\n    isConditionTruty(tplConfig) {\r\n        if(isObject(tplConfig)) {\r\n            const conditionDefined = Object.prototype.hasOwnProperty.call(tplConfig, 'condition');\r\n            return conditionDefined ? tplConfig.condition : true;\r\n        }\r\n        else {\r\n            throw 'Config is not valid. Please report this as a bug.'\r\n        }\r\n    },\r\n\r\n    parse(tpl, joinChar = '') {\r\n        return arrayJoinMap(\r\n            aarify(tpl),\r\n            tplConfig => {\r\n                // return if config is null or undefined\r\n                if(this.isNotValidTplConfig(tplConfig)) return null;\r\n\r\n                // convert to obj if config is string\r\n                const tplConfigObj = this.configify(tplConfig);\r\n\r\n                const {tpl, joinChar, control} = tplConfigObj;\r\n\r\n                // check if tpl could be included in output\r\n                if(this.isConditionTruty(tplConfigObj)) {\r\n                    if(control) {\r\n                        // if tpl is control, execute control flow\r\n                        const passingTpl = callMethodOf(this, control.toLowerCase(), [tplConfigObj], () => {\r\n                            throw `Provided control '${control}' is not valid`;\r\n                        });\r\n\r\n                        // parse the passing tpl \r\n                        if(passingTpl)\r\n                            return this.parse(passingTpl, joinChar);\r\n                    }\r\n                    else {\r\n                        return this.isTplParseable(tpl) ? this.parse(tpl, joinChar) : tpl;\r\n                    }\r\n                }\r\n            },\r\n            joinChar,\r\n            true\r\n        );\r\n    },\r\n\r\n    if({tpl}) {\r\n        return aarify(tpl).find(tplConfig => {\r\n            if(this.isNotValidTplConfig(tplConfig)) return null;\r\n            return this.isConditionTruty(this.configify(tplConfig));\r\n        });\r\n    },\r\n\r\n    with({tpl, resolve}) {\r\n        const resolvedValue = isFunction(resolve) ? resolve() : resolve;\r\n        return resolvedValue ? tpl(resolvedValue) : null;\r\n    }\r\n}\r\n\r\nconst rebind = (obj, method) => {\r\n    return obj[method].bind(obj);\r\n}\r\n\r\nconst callMethodOf = (obj, methodName, args, fallBackFn) => {\r\n    const method = obj[methodName];\r\n    if(method) {\r\n        return method.apply(obj, args)\r\n    }\r\n    else {\r\n        if(fallBackFn)\r\n            return fallBackFn();\r\n    }\r\n}\r\n\r\nconst returnableLoop = (array, cb) => {\r\n    const next = function() {\r\n\r\n    };\r\n    for(let i = 0; i < array.length; i++) {\r\n        const item = array[i];\r\n        cb(next, item, i, array);\r\n    }\r\n};\r\n\r\nexport default rebind(jsonTemplate, 'parse');","import jsonTemplating from './jsonTemplating';\r\n\r\nexport default (fontConfig, fileResolver) => {\r\n    const { name, weight, display, stretch, style, variant, unicodeRange, featureSettings, variationSettings } = fontConfig;\r\n    const urlTemplate = (name, format) => `url('${name}') format('${format}')`;\r\n\r\n    return jsonTemplating({\r\n        joinChar: ' ',\r\n        tpl: [\r\n            '@font-face {',\r\n            `font-family: '${name}';`,\r\n            {\r\n                condition: weight,\r\n                tpl: `font-weight: ${weight};`,\r\n            },\r\n            {\r\n                condition: display,\r\n                tpl: `font-display: ${display};`,\r\n            },\r\n            {\r\n                condition: stretch,\r\n                tpl: `font-stretch: ${stretch};`,\r\n            },\r\n            {\r\n                condition: style,\r\n                tpl: `font-style: ${style};`,\r\n            },\r\n            {\r\n                condition: variant,\r\n                tpl: `font-variant: ${variant};`,\r\n            },\r\n            {\r\n                condition: unicodeRange,\r\n                tpl: `unicode-range: ${unicodeRange};`,\r\n            },\r\n            {\r\n                condition: featureSettings,\r\n                tpl: `font-feature-settings: ${featureSettings};`,\r\n            },\r\n            {\r\n                condition: variationSettings,\r\n                tpl: `font-variation-settings: ${variationSettings};`,\r\n            },\r\n            {\r\n                control: 'with',\r\n                resolve: () => fileResolver('eot'),\r\n                tpl: file => `src: url('${file}');`,\r\n            },\r\n            {\r\n                control: 'with',\r\n                tpl: multipleUrls => `src: ${multipleUrls};`,\r\n                resolve: jsonTemplating({\r\n                    joinChar: ' , ',\r\n                    tpl: [\r\n                        {\r\n                            control: 'with',\r\n                            resolve: () => fileResolver('eot'),\r\n                            tpl: file => urlTemplate(`${file}#iefix`, 'embedded-opentype'),\r\n                        },\r\n                        {\r\n                            control: 'with',\r\n                            resolve: () => fileResolver('woff'),\r\n                            tpl: file => urlTemplate(file, 'woff'),\r\n                        },\r\n                        {\r\n                            control: 'with',\r\n                            resolve: () => fileResolver('woff2'),\r\n                            tpl: file => urlTemplate(file, 'woff2'),\r\n                        },\r\n                        {\r\n                            control: 'with',\r\n                            resolve: () => fileResolver('ttf'),\r\n                            tpl: file => urlTemplate(file, 'truetype'),\r\n                        },\r\n                        {\r\n                            control: 'with',\r\n                            resolve: () => fileResolver('svg'),\r\n                            tpl: file => urlTemplate(`${file}#${name}`, 'svg'),\r\n                        },\r\n                    ],\r\n                }),\r\n            },\r\n            '}',\r\n        ],\r\n    });\r\n};","import aarify from 'arrify';\r\nimport template from './template';\r\nimport { arrayJoinMap } from './arrayUtils';\r\n\r\nexport default ({ directoryContext, fonts }) => {\r\n    return arrayJoinMap(\r\n        aarify(fonts),\r\n        fontConfig => generateFontFace(directoryContext, fontConfig),\r\n        '\\n',\r\n    );\r\n};\r\n// DirectoryContext class identifies a specific directory and the files that can be resolved within the dir.\r\n\r\nconst generateFontFace = (directoryContext, fontConfig) => {\r\n    const fileResolver = ext => {\r\n        const fileName = `./${fontConfig.file}.${ext}`;\r\n        return directoryContext.exists(fileName)\r\n            ? directoryContext.resolve(fileName)\r\n            : null;\r\n    };\r\n\r\n    return template(fontConfig, fileResolver);\r\n};\r\n"],"names":["const","arrify","value","undefined","Array","isArray","Symbol","iterator","arrayJoin","array","separator","filter","item","join","arrayJoinMap","fn","useArrayJoin","mappedArray","map","isObject","val","isFunction","toString","Object","prototype","string","call","window","setTimeout","alert","confirm","prompt","jsonTemplate","configify","tplConfig","tpl","resolveTpl","isNotValidTplConfig","isTplParseable","isConditionTruty","conditionDefined","hasOwnProperty","condition","parse","joinChar","aarify","this","tplConfigObj","control","passingTpl","callMethodOf","toLowerCase","if","find","with","resolve","resolvedValue","rebind","obj","method","bind","methodName","args","fallBackFn","apply","fontConfig","fileResolver","name","weight","display","stretch","style","variant","unicodeRange","featureSettings","variationSettings","urlTemplate","format","jsonTemplating","file","multipleUrls","fonts","generateFontFace","directoryContext","ext","fileName","exists","template"],"mappings":"AAEAA,IAAMC,MAAM,aAAGC,OAAS;MACnBA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKC,SAAhC,EAA2C;WACnC,EAAP;;;MAGGC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,EAA0B;WAClBA,KAAP;;;MAGG,OAAOA,KAAP,KAAiB,QAArB,EAA+B;WACvB,CAACA,KAAD,CAAP;;;MAGG,OAAOA,KAAK,CAACI,MAAM,CAACC,QAAR,CAAZ,KAAkC,UAAtC,EAAkD;WAC1C,WAAIL,KAAJ,EAAP;;;SAGM,CAACA,KAAD,CAAP;CAjBD;;AAoBA,YAAc,GAAGD,MAAjB;;ACrBOD,IAAMQ,SAAS,aAAIC,KAAD,EAAQC,SAAR,EAAsB;SACpCD,KAAK,CACPE,MADE,WACKC,eAAQA,IAAI,IAAIT,YADrB,EAEFU,IAFE,CAEGH,SAFH,CAAP;CADG;AAMP,AAAOV,IAAMc,YAAY,aAAIL,KAAD,EAAQM,EAAR,EAAYL,SAAZ,EAAuBM,YAAvB,EAAwC;MAC1DC,WAAW,GAAGR,KAAK,CAACS,GAAN,CAAUH,EAAV,CAApB;SACOC,YAAY,GACbR,SAAS,CAACS,WAAD,EAAcP,SAAd,CADI,GAEbO,WAAW,CAACJ,IAAZ,CAAiBH,SAAjB,CAFN;CAFG;;ACPP;;;;;;AAOA,AAAe,SAASS,QAAT,CAAkBC,GAAlB,EAAuB;SAC7BA,GAAG,IAAI,IAAP,IAAe,OAAOA,GAAP,KAAe,QAA9B,IAA0ChB,KAAK,CAACC,OAAN,CAAce,GAAd,MAAuB,KAAxE;;;ACRF,gBAAc,GAAGC,UAAjB;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,SAAP,CAAiBF,QAAhC;;AAEA,SAASD,UAAT,CAAqBN,EAArB,EAAyB;MACnBU,MAAM,GAAGH,QAAQ,CAACI,IAAT,CAAcX,EAAd,CAAb;SACOU,MAAM,KAAK,mBAAX,IACJ,OAAOV,EAAP,KAAc,UAAd,IAA4BU,MAAM,KAAK,iBADnC,IAEJ,OAAOE,MAAP,KAAkB,WAAlB;EAECZ,EAAE,KAAKY,MAAM,CAACC,UAAd,IACAb,EAAE,KAAKY,MAAM,CAACE,KADd,IAEAd,EAAE,KAAKY,MAAM,CAACG,OAFd,IAGAf,EAAE,KAAKY,MAAM,CAACI,MALf,CAFH;;;ACDF/B,IAAMgC,YAAY,GAAG;EACjBC,6BAAS,CAACC,SAAD,EAAY;QACdf,QAAQ,CAACe,SAAD,CAAX,EAAwB;aACbA,SAAP;KADJ,MAGK;aACM;QACHC,GAAG,EAAED;OADT;;GANS;;EAYjBE,+BAAU,GAAG;WACFf,YAAU,CAACc,GAAD,CAAV,GAAkBA,GAAG,EAArB,GAA0BA,GAAjC;GAba;;EAgBjBE,iDAAmB,CAACH,SAAD,EAAY;WACpBA,SAAS,IAAI,IAApB;GAjBa;;EAoBjBI,uCAAc,CAACH,GAAD,EAAM;WACT/B,KAAK,CAACC,OAAN,CAAc8B,GAAd,KAAsBhB,QAAQ,CAACgB,GAAD,CAArC;GArBa;;EAwBjBI,2CAAgB,CAACL,SAAD,EAAY;QACrBf,QAAQ,CAACe,SAAD,CAAX,EAAwB;UACdM,gBAAgB,GAAGjB,MAAM,CAACC,SAAP,CAAiBiB,cAAjB,CAAgCf,IAAhC,CAAqCQ,SAArC,EAAgD,WAAhD,CAAzB;aACOM,gBAAgB,GAAGN,SAAS,CAACQ,SAAb,GAAyB,IAAhD;KAFJ,MAIK;YACK,mDAAN;;GA9BS;;EAkCjBC,qBAAK,CAACR,GAAD,EAAMS,QAAN,EAAqB;;uCAAP,GAAG;;WACX9B,YAAY,CACf+B,QAAM,CAACV,GAAD,CADS,YAEfD,WAAa;;UAENY,OAAKT,mBAAL,CAAyBH,SAAzB,CAAH,IAAwC,OAAO,IAAP,GAF/B;;UAKHa,YAAY,GAAGD,OAAKb,SAAL,CAAeC,SAAf,CAArB;MAEOC;MAAKS;MAAUI,mCAPb;;UAUNF,OAAKP,gBAAL,CAAsBQ,YAAtB,CAAH,EAAwC;YACjCC,OAAH,EAAY;;cAEFC,UAAU,GAAGC,YAAY,CAACJ,MAAD,EAAOE,OAAO,CAACG,WAAR,EAAP,EAA8B,CAACJ,YAAD,CAA9B,cAAoD;0CACpDC,OAAQ;WADR,CAA/B,CAFQ;;cAOLC,UAAH,IACI,OAAOH,OAAKH,KAAL,CAAWM,UAAX,EAAuBL,QAAvB,CAAP;SARR,MAUK;iBACME,OAAKR,cAAL,CAAoBH,GAApB,IAA2BW,OAAKH,KAAL,CAAWR,GAAX,EAAgBS,QAAhB,CAA3B,GAAuDT,GAA9D;;;KAxBG,EA4BfS,QA5Be,EA6Bf,IA7Be,CAAnB;GAnCa;;EAoEjBQ,iBAAE,IAAA,EAAQ;sBAANjB;;;WACOU,QAAM,CAACV,GAAD,CAAN,CAAYkB,IAAZ,WAAiBnB,WAAa;UAC9BY,OAAKT,mBAAL,CAAyBH,SAAzB,CAAH,IAAwC,OAAO,IAAP;aACjCY,OAAKP,gBAAL,CAAsBO,OAAKb,SAAL,CAAeC,SAAf,CAAtB,CAAP;KAFG,CAAP;GArEa;;EA2EjBoB,qBAAI,IAAA,EAAiB;sBAAVC;;;QACDC,aAAa,GAAGnC,YAAU,CAACkC,OAAD,CAAV,GAAsBA,OAAO,EAA7B,GAAkCA,OAAxD;WACOC,aAAa,GAAGrB,GAAG,CAACqB,aAAD,CAAN,GAAwB,IAA5C;;;CA7ER;;AAiFAxD,IAAMyD,MAAM,aAAIC,GAAD,EAAMC,MAAN,EAAiB;SACrBD,GAAG,CAACC,MAAD,CAAH,CAAYC,IAAZ,CAAiBF,GAAjB,CAAP;CADJ;;AAIA1D,IAAMkD,YAAY,aAAIQ,GAAD,EAAMG,UAAN,EAAkBC,IAAlB,EAAwBC,UAAxB,EAAuC;MAClDJ,MAAM,GAAGD,GAAG,CAACG,UAAD,CAAlB;;MACGF,MAAH,EAAW;WACAA,MAAM,CAACK,KAAP,CAAaN,GAAb,EAAkBI,IAAlB,CAAP;GADJ,MAGK;QACEC,UAAH,IACI,OAAOA,UAAU,EAAjB;;CAPZ;;AAqBA,qBAAeN,MAAM,CAACzB,YAAD,EAAe,OAAf,CAArB;;AC7GA,0BAAgBiC,UAAD,EAAaC,YAAb,EAA8B;EACjCC;EAAMC;EAAQC;EAASC;EAASC;EAAOC;EAASC;EAAcC;EAAiBC;;MACjFC,WAAW,aAAIT,IAAD,EAAOU,MAAP,sBAA0BV,IAAK,mBAAaU,MAAO,WAAvE;;SAEOC,cAAc,CAAC;IAClBlC,QAAQ,EAAE,GADQ;IAElBT,GAAG,EAAE,CACD,cADC,sBAEgBgC,IAAK,UACtB;MACIzB,SAAS,EAAE0B,MADf;MAEIjC,GAAG,qBAAkBiC,MAAO;KAL/B,EAOD;MACI1B,SAAS,EAAE2B,OADf;MAEIlC,GAAG,sBAAmBkC,OAAQ;KATjC,EAWD;MACI3B,SAAS,EAAE4B,OADf;MAEInC,GAAG,sBAAmBmC,OAAQ;KAbjC,EAeD;MACI5B,SAAS,EAAE6B,KADf;MAEIpC,GAAG,oBAAiBoC,KAAM;KAjB7B,EAmBD;MACI7B,SAAS,EAAE8B,OADf;MAEIrC,GAAG,sBAAmBqC,OAAQ;KArBjC,EAuBD;MACI9B,SAAS,EAAE+B,YADf;MAEItC,GAAG,uBAAoBsC,YAAa;KAzBvC,EA2BD;MACI/B,SAAS,EAAEgC,eADf;MAEIvC,GAAG,+BAA4BuC,eAAgB;KA7BlD,EA+BD;MACIhC,SAAS,EAAEiC,iBADf;MAEIxC,GAAG,iCAA8BwC,iBAAkB;KAjCtD,EAmCD;MACI3B,OAAO,EAAE,MADb;MAEIO,OAAO,uBAAQW,YAAY,CAAC,KAAD,IAF/B;MAGI/B,GAAG,YAAE4C,+BAAqBA,IAAK;KAtClC,EAwCD;MACI/B,OAAO,EAAE,MADb;MAEIb,GAAG,YAAE6C,kCAAwBA,YAAa,UAF9C;MAGIzB,OAAO,EAAEuB,cAAc,CAAC;QACpBlC,QAAQ,EAAE,KADU;QAEpBT,GAAG,EAAE,CACD;UACIa,OAAO,EAAE,MADb;UAEIO,OAAO,uBAAQW,YAAY,CAAC,KAAD,IAF/B;UAGI/B,GAAG,YAAE4C,eAAQH,WAAW,EAAIG,IAAK,cAAS,mBAAlB;SAJ3B,EAMD;UACI/B,OAAO,EAAE,MADb;UAEIO,OAAO,uBAAQW,YAAY,CAAC,MAAD,IAF/B;UAGI/B,GAAG,YAAE4C,eAAQH,WAAW,CAACG,IAAD,EAAO,MAAP;SAT3B,EAWD;UACI/B,OAAO,EAAE,MADb;UAEIO,OAAO,uBAAQW,YAAY,CAAC,OAAD,IAF/B;UAGI/B,GAAG,YAAE4C,eAAQH,WAAW,CAACG,IAAD,EAAO,OAAP;SAd3B,EAgBD;UACI/B,OAAO,EAAE,MADb;UAEIO,OAAO,uBAAQW,YAAY,CAAC,KAAD,IAF/B;UAGI/B,GAAG,YAAE4C,eAAQH,WAAW,CAACG,IAAD,EAAO,UAAP;SAnB3B,EAqBD;UACI/B,OAAO,EAAE,MADb;UAEIO,OAAO,uBAAQW,YAAY,CAAC,KAAD,IAF/B;UAGI/B,GAAG,YAAE4C,eAAQH,WAAW,EAAIG,IAAK,SAAGZ,OAAQ,KAApB;SAxB3B;OAFc;KA3C1B,EA0ED,GA1EC;GAFY,CAArB;CAJJ;;ACEA,0BAAe,EAAiC;8CAAZc;;;SACzBnE,YAAY,CACf+B,QAAM,CAACoC,KAAD,CADS,YAEfhB,qBAAciB,gBAAgB,CAACC,gBAAD,EAAmBlB,UAAnB,IAFf,EAGf,IAHe,CAAnB;CADJ;;AASAjE,IAAMkF,gBAAgB,aAAIC,gBAAD,EAAmBlB,UAAnB,EAAkC;MACjDC,YAAY,aAAGkB,KAAO;QAClBC,QAAQ,GAAI,QAAIpB,UAAU,CAACc,KAAK,SAAGK,GAAzC;WACOD,gBAAgB,CAACG,MAAjB,CAAwBD,QAAxB,IACDF,gBAAgB,CAAC5B,OAAjB,CAAyB8B,QAAzB,CADC,GAED,IAFN;GAFJ;;SAOOE,QAAQ,CAACtB,UAAD,EAAaC,YAAb,CAAf;CARJ;;;;"}